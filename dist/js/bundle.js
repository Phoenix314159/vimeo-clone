"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,o=Array(e.length);t<e.length;t++)o[t]=e[t];return o}return Array.from(e)}angular.module("vimeoApp",["ui.router"]).config(["$stateProvider","$urlRouterProvider",function(e,t){t.otherwise("/"),e.state("home",{url:"/",templateUrl:"./views/home.html",controller:"mainCtrl"}).state("userVideos",{url:"/userVideos",templateUrl:"./views/userVideos.html",controller:"userVideosCtrl"}).state("search",{url:"/search",templateUrl:"./views/search.html",controller:"searchCtrl"}).state("edit",{url:"/edit",templateUrl:"./views/editvideo.html",controller:"editCtrl"}).state("playvideo",{url:"/playvideo",templateUrl:"./views/playVid.html",controller:"playVideo"}).state("uploadVideo",{url:"/uploadVideo",templateUrl:"./views/uploadVideo.html",controller:"uploadVideoCtrl"}).state("loading",{url:"/searching",templateUrl:"./views/loading.html",controller:"loadingCtrl"}).state("watchLater",{url:"/watchlater",templateUrl:"./views/watchLater.html",controller:"userVideos"})}]),angular.module("vimeoApp").controller("accountCtrl",["$scope",function(e){}]),angular.module("vimeoApp").controller("commentsCtrl",["$scope","mainService",function(e,t){e.user=!0,e.getAllComments=function(){var o=t.arr[0];t.getComments(o).then(function(t){e.comments=t.data.data,console.log(e.comments);for(var o=0;o<e.comments.length;o++)e.comments[o].user.pictures.sizes[3].link})},e.addComment=function(){var o=t.arr[0];console.log(o),t.postComment(o,e.text).then(function(t){e.getAllComments(),e.text=""})},e.getAllComments()}]),angular.module("vimeoApp").controller("loadingCtrl",["$scope","$timeout",function(e,t){e.loadB=!0,e.loadG=!1,e.loadR=!1,t(),t(function(){e.loadG=!0},500),t(),t(function(){e.loadR=!0},1e3),t()}]),angular.module("vimeoApp").controller("mainCtrl",["$scope","mainService","$state",function(e,t,o){e.login=function(){t.login().then(function(t){e.data=t.data})},e.login(),e.playVideo=function(e,r,n){t.clickedVideo(e),t.transferVideo(n);var i=r.replace(/\D/g,"");t.getId(i),o.go("playvideo")},t.getVideosByChannel("staffpicks").then(function(t){e.staffpicks=t.data.data}),t.getVideosByChannel("documentary").then(function(t){e.documentary=t.data.data})}]),angular.module("vimeoApp").controller("navBarCtrl",["$scope","mainService","$state",function(e,t,o){e.profilePicAndUpload=!1,e.logInNavBar=!0,e.mainDropDown=!0,e.login=function(){t.login().then(function(t){e.data=t.data})},e.logout=function(){t.logout().then(function(t){var r=t.data;e.logInNavBar=r,e.profilePicAndUpload=!r,e.mainDropDown=r,o.go("home")})},e.searchQuery=function(r){o.go("loading"),t.searchVideos(1,r).then(function(r){t.searchedVideo(r.data.data),o.go("search"),e.query=""})},e.getUser=function(){o.go("uploadVideo"),t.getUser().then(function(e){})},e.checkUser=function(){t.getUser().then(function(t){t.data.name&&(e.logInNavBar=!1,e.profilePicture=t.data.pictures[3].link,e.userName=t.data.name,e.profilePicAndUpload=!0)})},e.checkUser()}]),angular.module("vimeoApp").controller("playVideo",["$scope","mainService","$state",function(e,t,o){var r=function(e){return[].concat(_toConsumableArray(new Set(e)))};e.showButton=!0,e.video=t.video,t.getVideosByChannel("staffpicks").then(function(t){e.arr2=t.data.data}),e.getChannelVideos=function(){t.getVideosByChannel("music").then(function(o){e.arr=o.data.data,e.arr.unshift(t.arr3[0]),e.arr=r(e.arr),e.playVideo=function(o,n,i){t.clickedVideo(o);var a=n.replace(/\D/g,"");t.getId(a),e.video=t.arr2[t.arr2.length-1],document.querySelector(".video-window").innerHTML=e.video,e.getVideo(),e.getAllComments(),e.arr.unshift(i),e.arr=r(e.arr)},e.showMore=function(){e.showButton=!1;for(var t=0;t<e.arr2.length;t++)e.arr.push(e.arr2[t])}})},e.getChannelVideos(),e.getVideo=function(){var o=t.arr[0];t.getVideoById(o).then(function(t){e.media=t.data,console.log("$scope.media",e.media);!function(t){var o=t.slice(0,10).split("").filter(function(e){return"-"!==e}).join("");e.momentTime=moment(o,"YYYYMMDD").fromNow()}(t.data.created_time),e.dateTest=moment("20170601","YYYYMMDD").fromNow()})},e.getVideo(),e.getAllComments=function(){var o=t.arr[0];t.getComments(o).then(function(t){e.comments=t.data.data})},e.getAllComments(),document.querySelector(".video-window").innerHTML=e.video}]),angular.module("vimeoApp").controller("searchCtrl",["$scope","mainService","$state",function(e,t,o){!function(){e.videos=t.videoData}(),e.getVideoID=function(e){t.getId(e)},e.playVideo=function(r,n,i){t.clickedVideo(r);var a=n.replace(/\D/g,"");t.getId(a),t.transferVideo(e.videos[i]),o.go("playvideo")},e.page=function(o){t.searchVideos(o,t.query).then(function(t){e.videos=t.data.data,console.log(e.videos)})}}]),angular.module("vimeoApp").controller("uploadVideoCtrl",["$scope","mainService","$state",function(e,t,o){e.uploadVideo=function(){t.uploadVid(e.video).then(function(e){console.log(e),o.go("userVideos")})}}]),angular.module("vimeoApp").filter("firstLetter",function(){return function(e){var t=e.split(""),o=t[0].toUpperCase();t.splice(0,1);return o+t.join("")}}).filter("convertedTime",function(){return function(e){var t=parseInt(e),o=Math.floor(t/60),r=t%60;return 0===o?1===r.toString().length?o+"0:0"+r:o+"0:"+r:1===r.toString().length?o+":0"+r:o+":"+r}}).controller("userVideosCtrl",["$scope","mainService","$state",function(e,t,o){e.userVideos=function(){t.userVideos().then(function(t){e.videos=t.data.data,console.log(e.videos)})},e.userVideos(),e.play=function(e,r,n){t.clickedVideo(e),t.transferVideo(n);var i=r.replace(/\D/g,"");t.getId(i),o.go("playvideo")},e.displayWatchLaterList=function(){var o=t.arr[0];t.getVideoById(o).then(function(r){t.getWatchLaterList(r.data,o).then(function(t){e.list=t.data})})},e.displayWatchLaterList()}]),angular.module("vimeoApp").directive("commentsDir",function(){return{restrict:"AE",templateUrl:"./views/commentsDir.html",controller:"commentsCtrl"}}),angular.module("vimeoApp").directive("fileUploader",["$parse",function(e){return{restrict:"A",link:function(t,o,r){var n=e(r.fileUploader).assign;o.bind("change",function(){t.$apply(function(){n(t,o[0].files[0])})})}}}]),angular.module("vimeoApp").directive("footerDir",function(){return{restrict:"AE",templateUrl:"./views/footerDir.html"}}),angular.module("vimeoApp").directive("navBar",function(){return{restrict:"E",templateUrl:"./views/navBar.html",link:function(e){},controller:"navBarCtrl"}}),angular.module("vimeoApp").service("mainService",["$http",function(e){var t=this;t.videoData="",t.video="",t.arr=[],t.arr2=[],t.arr3=[],t.searchedVideo=function(e){t.videoData=e},t.getId=function(e){if(t.arr.push(e),t.arr.length>1)for(;t.arr.length>1;)t.arr.shift();console.log(t.arr[0])},t.clickedVideo=function(e){t.video=e,t.arr2.push(e)},t.transferVideo=function(e){if(t.arr3.push(e),t.arr3.length>1)for(;t.arr3.length>1;)t.arr3.shift()},t.getVideosByChannel=function(t){return e({method:"GET",url:"/api/videos/channels/"+t})},t.searchVideos=function(o,r){return t.query=r,e({method:"GET",url:"/api/videos/"+o+"?search="+r})},t.getVideoById=function(t){return e({method:"GET",url:"/api/videos?id="+t})},t.getComments=function(t){return e({method:"GET",url:"/api/videos/"+t+"/comments"})},t.postComment=function(t,o){return e({method:"POST",data:{text:o},url:"/api/videos/"+t+"/comments"})},t.login=function(){return e({method:"GET",url:"/api/login"})},t.logout=function(){return e({method:"GET",url:"/api/logout"})},t.getUser=function(){return e({method:"GET",url:"/api/currentuser"})},t.uploadVid=function(t){return e({method:"POST",data:{video:t},url:"/api/uploadvideo"})},t.userVideos=function(){return e({method:"GET",url:"/api/usersvideos"})},t.getAccessToken=function(){return e({method:"GET",url:"/api/accesstoken"})},t.addToWatchLater=function(t,o){return e({method:"POST",data:{video:t},url:"/api/videos/"+o+"/watchlater"})},t.getWatchLaterList=function(){return e({method:"GET",url:"/api/usersvideos"})}}]);
//# sourceMappingURL=bundle.js.map
